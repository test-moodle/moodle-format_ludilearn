/*! format_ludilearn 2024-11-28 */
define(["jquery","core/ajax","core/templates"],(o,t,p)=>{function Pagination(t,e){this.elementid=t,this.sort="id",this.limit=10,this.pagination=e,this.currentpage=1}return Pagination.prototype.load=function(e,a){let n=this;var i={pages:[]};i.onepage=1===this.pagination;for(let t=1;t<=this.pagination;t++){var r={};r.number=t,i.pages.push(r),r.active=1===t}p.render("format_ludilearn/report/pagination",i).then(t=>{document.getElementById(n.elementid).innerHTML=t,n.currentpage=1,n.chargeEventsPagination(e,a)}).fail(t=>{console.error(t)})},Pagination.prototype.changeCurrentPage=function(t,e,a){t!==this.currentpage&&t<=this.pagination&&0<t&&(this.currentpage=t),a.limit=this.limit,a.offset=this.limit*(this.currentpage-1),a.sort=this.sort,e(a)},Pagination.prototype.chargeEventsPagination=function(n,i){let r=this;o(".page-link").on("click",e=>{e.preventDefault();var a=e.currentTarget;if(-1!==a.getAttribute("tabindex")){var a=a.id,e=o(e.currentTarget).attr("data-id");let t=r.currentpage;"page-link-previous"===a?t--:"page-link-next"===a?t++:t=parseInt(e),t!==r.currentpage&&(o("#page-link-"+r.currentpage).parent().removeClass("active"),o("#page-link-"+t).parent().addClass("active"),a=o("#page-link-previous"),1<t&&1===r.currentpage?(a.parent().removeClass("disabled"),a.attr("tabindex",0)):1===t&&(a.parent().addClass("disabled"),a.attr("tabindex",-1)),e=o("#page-link-next"),t<r.pagination&&r.currentpage===r.pagination?(e.parent().removeClass("disabled"),e.attr("tabindex",0)):t===r.pagination&&(e.parent().addClass("disabled"),e.attr("tabindex",-1)),r.changeCurrentPage(t,n,i))}})},{load:(t,e,a,n)=>{new Pagination(t,e).load(a,n)}}});