/*! format_ludilearn 2024-11-28 */
define(["jquery","core/ajax","core/templates","format_ludilearn/pagination","format_ludilearn/loading"],(t,d,m,f,c)=>{let s,o=(e,r,a,t,o)=>{var n={};n.courseid=s,n.contain=r,n.limit=a,n.offset=t,n.sort=o;let i=document.getElementById("tableReport"),l=i.getElementsByTagName("tbody");0<l.length&&c.load("tbodyReport"),d.call([{methodname:"format_ludilearn_get_report",args:n}],!0,!0)[0].done(o=>{m.render("format_ludilearn/report/table_report",o).then(t=>{if(0<l.length&&l[0].remove(),i.insertAdjacentHTML("beforeend",t),!0===e){let e=Math.ceil(o.countWithoutLimit/a);0===e&&(e=1);t={};t.contain=r,f.load("pagination",e,u,t)}}).fail(e=>{console.error(e)})}).fail(e=>{console.error(e)})},u=e=>{o(!1,e.contain,e.limit,e.offset,e.sort)};return{init:e=>{s=e,t("#formSearchReport").on("submit",e=>{e.preventDefault();e=t("#inputSearchReport").val();o(!0,e,10,0,"firstname")}),o(!0,"",10,0,"id")}}});