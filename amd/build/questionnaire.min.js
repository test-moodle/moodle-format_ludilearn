/*! format_ludilearn 2024-11-28 */
define(["jquery","core/ajax","core/str"],(s,a,l)=>{let t,d,m;return{init:(e,r,o)=>{t=e,d=r,m=o,s("#form-questionnaire").on("submit",e=>{e.preventDefault();var r=new FormData(e.target),o={answers:[]};let t=!1,i=0;for(let e=1;e<=d;e++){var n={};if(n.id=r.get("questionid-"+e),n.score=r.get("question-"+e),null===n.score){t=!0,i=e;break}o.answers.push(n)}if(t){s(".invalid-feedback").html("");let r;l.get_string("missinganswers","format_ludilearn").then(e=>{r=e;e=s("#id_error_"+i);e.html(r),e.show(),document.querySelector("#id_error_"+i).scrollIntoView({behavior:"smooth"})})}else a.call([{methodname:"format_ludilearn_submit_questionnaire",args:o}],!0,!0)[0].done(e=>{window.location.href=m}).fail(e=>{console.error(e)})})}}});